<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Ebbinghaus Intelligent Remember [v1.0]</title>
<script type="text/javascript" src="js/hui.js"></script>

<style>

</style>
<script type="text/javascript">
'use strict';
var form;
window.onload = function(){
    hui.Control.init(document.body);
    form = hui.Control.getByFormName('form');
    form.addOption = function () {
        var options = form.getByFormName('options').getMain();
        var index = (options.index || hui.t('textarea', options).length) + 1;
        options.index = index;
        var tpl = 
            '<div id="options#{index}" ui="type:\'Panel\',formName:\'#{index}\',isFormItem: true">#{index}' +
            '    <input type="checkbox" name="correct" ui="type:\'Checkbox\',id:\'correct#{index}\',value:\'yes\'" />' +
            '    <textarea cols="40" rows="2" name="content" ui="type:\'TextInput\',id:\'content#{index}\'"></textarea>' +
            '    <a href="javascript:" onclick="hui.Control.getByFormName(\'form\').removeOption(\'#{index}\')">remove</a>' +
            '</div>';
        hui.util.appendHTML(options, hui.format(tpl, {index: index}));
        hui.Control.create(hui.g('options'+index));
    };
    form.removeOption = function (index) {
        var options = form.getByFormName('options');
        options.getByFormName(index).dispose();

    };
    
    var submit = form.getByFormName('submit');
    submit.onclick = function () {
        var data = hui.Control.getByFormName('form').getParamMap();
        console.log(data);
    };
    var add = form.getByFormName('add');
    add.onclick = form.addOption;
    
    form.addOption();
    form.addOption();
    form.addOption();
    form.addOption();
};
//-->
</script>

</head>

<body style="">
<!--target:test-->

<div ui="type:'Panel',formName:'form'">
    <input type="hidden" ui="type:'TextInput',formName:'sid'" />
    题目：<textarea cols="40" rows="2" name="subject" ui="type:'TextInput',id:'subject'"></textarea>
    <button ui="type:'Button',formName:'submit'">Save</button>
    <br/><br/>
    <div ui="type:'Panel',formName:'options',isFormItem: true">
        选项：<a href="javascript:" ui="type:'Button',formName:'add'">add</a>
    </div>
    
    
</div>

</body>

</html>
